{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nconst startBtn = document.querySelector('button[data-start]');\nconst datetimePicker = document.querySelector('#datetime-picker')\n\n\nstartBtn.disabled = true;\n\nlet userSelectedDates = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0] < Date.now()) {\n          \n          iziToast.error({\n            message: `Please choose a date in the future`,\n            position: 'topRight'\n          });\n            return;\n     }\n        userSelectedDates = selectedDates[0];\n                startBtn.disabled = false;\n                iziToast.success({\n            message: `Вибрана дата: ', ${selectedDates[0]}`,\n            position: 'topRight'\n          });\n\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction ms2str(time) {\n  const days = pad(Math.floor(time / (1000 * 60 * 60 * 24)));\n  const hours = pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\n  const mins = pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n  const secs = pad(Math.floor((time % (1000 * 60)) / 1000));\n\n  return {\n    days,\n    hours,\n    minutes: mins,\n    seconds: secs,\n  };\n}\n\nlet intervalId;\n\nstartBtn.addEventListener('click', () => {\n  if (intervalId) return;          \n  if (!userSelectedDates) return;  \n\n\n  if (userSelectedDates <= Date.now()) {\n    iziToast.error({ message: 'Выберите будущую дату', position: 'topRight' });\n    startBtn.disabled = true;\n    return;\n  }\n\n  datetimePicker.disabled = true;\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = userSelectedDates - currentTime;\n\n    if (diff < 1000) {\n      clearInterval(intervalId);\n      intervalId = null;       \n      updateTimerUI(ms2str(0));\n      datetimePicker.disabled = false;\n      startBtn.disabled = true;      \n    }\n\n    updateTimerUI(ms2str(diff));\n  }, 1000);\n});\n\n\nfunction updateTimerUI({ days, hours, minutes, seconds }) {\n  document.querySelector('[data-days]').textContent = days;\n  document.querySelector('[data-hours]').textContent = hours;\n  document.querySelector('[data-minutes]').textContent = minutes;\n  document.querySelector('[data-seconds]').textContent = seconds;\n}"],"names":["startBtn","datetimePicker","userSelectedDates","options","selectedDates","iziToast","flatpickr","pad","value","ms2str","time","days","hours","mins","secs","intervalId","currentTime","diff","updateTimerUI","minutes","seconds"],"mappings":"0IAKA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAiB,SAAS,cAAc,kBAAkB,EAGhED,EAAS,SAAW,GAEpB,IAAIE,EAAoB,KAExB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CACnB,GAAIA,EAAc,CAAC,EAAI,KAAK,IAAG,EAAI,CAEjCC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UACtB,CAAW,EACC,MACN,CACEH,EAAoBE,EAAc,CAAC,EAC3BJ,EAAS,SAAW,GACpBK,EAAS,QAAQ,CACrB,QAAS,oBAAoBD,EAAc,CAAC,CAAC,GAC7C,SAAU,UACtB,CAAW,CAER,CACH,EAEAE,EAAU,mBAAoBH,CAAO,EAErC,SAASI,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASC,EAAOC,EAAM,CACpB,MAAMC,EAAOJ,EAAI,KAAK,MAAMG,EAAQ,KAAoB,CAAC,EACnDE,EAAQL,EAAI,KAAK,MAAOG,GAAQ,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,CAAC,EACzEG,EAAON,EAAI,KAAK,MAAOG,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,CAAC,EAC9DI,EAAOP,EAAI,KAAK,MAAOG,GAAQ,IAAO,IAAO,GAAI,CAAC,EAExD,MAAO,CACL,KAAAC,EACA,MAAAC,EACA,QAASC,EACT,QAASC,CACb,CACA,CAEA,IAAIC,EAEJf,EAAS,iBAAiB,QAAS,IAAM,CACvC,GAAI,CAAAe,GACCb,EAGL,IAAIA,GAAqB,KAAK,MAAO,CACnCG,EAAS,MAAM,CAAE,QAAS,wBAAyB,SAAU,UAAU,CAAE,EACzEL,EAAS,SAAW,GACpB,MACD,CAEDC,EAAe,SAAW,GAE1Bc,EAAa,YAAY,IAAM,CAC7B,MAAMC,EAAc,KAAK,MACnBC,EAAOf,EAAoBc,EAE7BC,EAAO,MACT,cAAcF,CAAU,EACxBA,EAAa,KACbG,EAAcT,EAAO,CAAC,CAAC,EACvBR,EAAe,SAAW,GAC1BD,EAAS,SAAW,IAGtBkB,EAAcT,EAAOQ,CAAI,CAAC,CAC3B,EAAE,GAAI,EACT,CAAC,EAGD,SAASC,EAAc,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAO,EAAS,QAAAC,CAAO,EAAI,CACxD,SAAS,cAAc,aAAa,EAAE,YAAcT,EACpD,SAAS,cAAc,cAAc,EAAE,YAAcC,EACrD,SAAS,cAAc,gBAAgB,EAAE,YAAcO,EACvD,SAAS,cAAc,gBAAgB,EAAE,YAAcC,CACzD"}